<div class="@ModalClass">
    <div class="modal-overlay" @onclick="Close"></div>
    <div class="modal-content">
        <div class="modal-header">
            <h5>@Title</h5>
        </div>
        <div class="modal-body">
            @ChildContent
        </div>
        <div class="modal-footer">
            <button class="btn" @onclick="Close">Cancel</button>
            <button class="btn btn-primary" @onclick="OnConfirm">OK</button>
        </div>
    </div>
</div>

<style>
    .modal.hide {
        display: none;
    }

    .modal.show {
        display: block;
        position: fixed;
        inset: 0;
        z-index: 1050;
    }

    .modal-overlay {
        position: fixed;
        inset: 0;
        background: rgba(0, 0, 0, 0.5);
    }

    .modal-content {
        background: white;
        max-width: 500px;
        margin: 10% auto;
        padding: 20px;
        border-radius: 8px;
        z-index: 1060;
    }
</style>

@code {
    [Parameter] public string Title { get; set; } = "Delete";
    [Parameter] public RenderFragment ChildContent { get; set; } = null!;
    [Parameter] public EventCallback OnConfirmClicked { get; set; }

    private bool IsVisible { get; set; }
    private string ModalClass => IsVisible ? "modal show" : "modal hide";

    public void Show()
    {
        IsVisible = true;
        StateHasChanged();
    }

    public void Close()
    {
        IsVisible = false;
        StateHasChanged();
    }

    private async Task OnConfirm()
    {
        if (OnConfirmClicked.HasDelegate)
            await OnConfirmClicked.InvokeAsync();
        Close();
    }
}
